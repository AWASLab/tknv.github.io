---
layout: post
title: Debian Sarge Openswan klips(no one want now)
date: '2011-06-03T07:34:00.001Z'
author: tknv
tags: 
modified_time: '2011-06-03T07:34:41.364Z'
blogger_id: tag:blogger.com,1999:blog-11459759.post-7064959937436915684
blogger_orig_url: http://phichyudebow.blogspot.com/2011/06/debian-sarge-openswan-klipsno-one-want.html
---

<div class='posterous_autopost'><ul>  <li>aptitude install build-essential libgmp3-dev gawk flex bison kernel-source-&lt;yo linux&gt; kernel-headers-&lt;yo linux&gt;&lt;yo arch&gt;</li>  <li>get patch and patch kernel,build and install</li>  </ul>  <blockquote>  <p><span style="color: #ff0000;">When config kernel,NB! This is VERY important the following value has got to be removed:</span><br /><span style="color: #ff0000;"> &lt; &gt; PF_KEY sockets</span><br /><span style="color: #ff0000;"> This is the NETKEY option in the kernel, we will disable this one so we can</span><br /><span style="color: #ff0000;"> make room for KLIPS :)</span></p>  </blockquote>  <p>idea from <a href="http://linux.derkeiler.com/Mailing-Lists/Debian/2006-10/msg00661.html">here</a>.</p>  <ul>  <li>&nbsp;  <ul>  <li><div class="data type-shell">  <table cellspacing="0" cellpadding="0"> <tr> <td> <pre class="line_numbers"><span rel="#L1" id="L1">1</span> <span rel="#L2" id="L2">2</span> <span rel="#L3" id="L3">3</span> <span rel="#L4" id="L4">4</span> <span rel="#L5" id="L5">5</span> <span rel="#L6" id="L6">6</span> <span rel="#L7" id="L7">7</span> <span rel="#L8" id="L8">8</span> <span rel="#L9" id="L9">9</span> </pre> </td> <td width="100%">   <div class="highlight"><pre /><div class="line" id="LC1"><span class="nb">cd</span> /usr/src</div><div class="line" id="LC2">wget http://www.openswan.org/download/openswan-2.4.15.tar.gz</div><div class="line" id="LC3">wget http://www.openswan.org/download/openswan-2.4.15.kernel-2.4-klips.patch.gz</div><div class="line" id="LC4">tar -xvjf kernel-source&lt;yo linux&gt;</div><div class="line" id="LC5"><span class="nb">cd </span>kernel-source&lt;yo linux&gt;</div><div class="line" id="LC6">cp -r ../kernel-headers-&lt;yo linux&gt;/* .</div><div class="line" id="LC7">patch -p1 &lt; some/patch/openswan-2.4.15.kernel-2.4-klips.patch</div><div class="line" id="LC8">make oldconfig or make menuconfig</div><div class="line" id="LC9">make dep bzImage install</div></pre></div>   </td> </tr> </table>  </div></li>  </ul>  <ul>  <li><a href="http://pastebin.com/4sXTiDZd" title="Sarge config klips">config file</a><br />  <ul>  </ul>  </li>  </ul>  </li>  </ul>  <ul>  <li>build openswan userland tool   <ul>  <li><div class="data type-shell">  <table cellspacing="0" cellpadding="0"> <tr> <td> <pre class="line_numbers"><span rel="#L1" id="L1">1</span> <span rel="#L2" id="L2">2</span> <span rel="#L3" id="L3">3</span> </pre> </td> <td width="100%">   <div class="highlight"><pre /><div class="line" id="LC1"><span class="nb">cd </span>some/src/openswan-2.4.15</div><div class="line" id="LC2">make <span class="nv">KERNELSRC</span><span class="o">=</span>/usr/src/kernel-source&lt;yo linux&gt; programs module</div><div class="line" id="LC3">make <span class="nv">KERNELSRC</span><span class="o">=</span>/usr/src/kernel-source&lt;yo linux&gt; install minstall</div></pre></div>   </td> </tr> </table>  </div></li>  <li>when succeeded build <a title="success!">log</a></li>  </ul>  </li>  </ul></div><div class="blogger-post-footer">/TKNV</div>